!function(t){var e={};function o(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=e,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=2)}([function(t,e,o){"use strict";o.d(e,"b",function(){return c}),o.d(e,"a",function(){return n}),o.d(e,"d",function(){return a}),o.d(e,"c",function(){return s});const n=function(t,e,o){chrome.storage.sync.get(t,function(n){e(n[t],o)})},a=function(t,e,o){const n={};n[t]=e,chrome.storage.sync.set(n,o)},c=function(t,e){chrome.storage.sync.remove(t,e)},s=function(t){chrome.tabs.query({active:!0,currentWindow:!0},function(e){chrome.tabs.sendMessage(e[0].id,t,function(t){})})}},,function(t,e,o){"use strict";o.r(e);var n=o(0);const a=function(t,e){window.controller.user.socket.send("PRIVMSG #"+window.controller.channel+" : "+t),e&&e(),console.log(t)},c=function(t,e){e.active&&e.connected&&e.socket.send("PRIVMSG "+window.controller.channel+" :/w ttdbot "+t)},s={all:[{command:"str",name:"Strength"}],onyx:[{command:"mst",name:"Mastery"}],emerald:[{command:"bld",name:"Boulder Turret"}],citrine:[{command:"slw",name:"Slow Bubble"},{command:"pwr",name:"Power"}],ruby:[{command:"slw",name:"Slow Bubble"},{command:"fcs",name:"Focus"},{command:"bld",name:"Boulder Turret"}]},l=function(){if(window.controller.activeMap){window.controller.towerSpellsActive=!0,window.controller.videoContainer.classList.add("tower-spells-active"),console.log("init tower spells");const t=[];t.includes(window.controller.user.gemStats.using)||t.push(window.controller.user.gemStats.using);const e=document.querySelectorAll(".tower");for(let o=0;o<e.length;o++){const n=e[o].getAttribute("data-command").replace("!",""),a=[],c=document.createElement("div");c.classList.add("spell-container");for(let e=0;e<t.length;e++)for(let o=0;o<s[t[e]].length;o++)if(!a.includes(s[t[e]][o].name)){a.push(s[t[e]][o].name);const l=document.createElement("div");l.classList.add("spell-container__item");const i=document.createElement("button");i.classList.add("spell-container__item__button"),i.setAttribute("command",`!hp${s[t[e]][o].command}${n}`),i.innerHTML=s[t[e]][o].name,l.appendChild(i),c.appendChild(l)}e[o].appendChild(c)}const o=document.querySelectorAll(".spell-container__item__button");for(let t=0;t<o.length;t++)o[t].addEventListener("click",function(t){t.stopPropagation(),a(this.getAttribute("command"))})}},i=function(){window.controller.towerSpellsActive=!1,window.controller.videoContainer.classList.remove("tower-spells-active"),console.log("destroy tower spells");const t=document.querySelectorAll(".spell-container");for(let e=0;e<t.length;e++)t[e].remove()},r=function(){console.log("update tower spells"),i(),l()},d={archer:["bowman","sniper","gunner"],rogue:["knifethrower","assassin","ninja"],firemage:["pyromancer","bombermage","saboteur"],frostmage:["icemage","trickster","lightningmage","shockmage"],alchemist:["plaguedoctor","undeadarcher","deathdealer","potionmaster"],bard:["minstrel","commander","scout"]};var m=function(t,e){let o=null;"@"===e.data[0]?(function(t,e){if(e.message&&e.message.toLowerCase().includes(t.userName.toLowerCase()+" switched")){const o=e.message.toLowerCase().replace(`${t.userName.toLowerCase()} switched to `,"");t.gemStats.using=o.toLowerCase(),t.updatedStats(),window.controller.towerSpellsActive&&r()}}(t,o=function(t){let e={};return t.data.split(";").map(function(t){const o=t.split("=");e[o[0]]=o[1]}),e["user-type"]&&(e.mod&&(e["user-type"]=e["user-type"].replace("mod :"," :")),e.info=e["user-type"].match(/^\s.*?\s/g)[0].trim(),e.type=e["user-type"].match(/[A-Z].*?\s/g)[0].trim(),e.message=e["user-type"].match(/(?<!^) :(?!\s).*/g),e.recipient=e["user-type"].match(/(?<!^)\s.*\s:/g),e.message&&(e.message=e.message[0].replace(" :","")),e.recipient&&(e.recipient=e.recipient[0].split(" ")[2])),e}(e)),"TTDBot"===o["display-name"]&&(o.recipient===t.userName&&(o.message.includes("Gem Rank")?function(t,e){let o={};e.message.trim().replace(/\s/g,"").split("][").map(t=>{const e=t.split(":");o[e[0].replace("[","").toLowerCase()]=e[1].replace("]","").toLowerCase()}),t.gemStats=o,t.updatedStats()}(t,o):o.message.includes("Rank")&&o.message.includes("Highpriest")?function(t,e){e.message.trim().replace(/\s/g,"").split("][").map(e=>{const o=e.replace("[","").replace("]","").replace("Rank",""),n=(o.match(/\d+/g),o.match(/\D+/g)[0]),a=Object.keys(d);for(let e=0;e<a.length;e++)d[a[e]].includes(n)&&(t.specs||(t.specs={}),t.specs[a[e]]=n)}),t.updatedStats()}(t,o):a(o.message)),o.message.toLowerCase().includes(`${t.userName} has changed their`)&&"TTDBot"===o["display-name"]&&(t.class=t.tempMemory.class,t.specs[t.class]=t.tempMemory.spec,t.updatedStats()))):"PING"===e.data.split(" ")[0]&&(t.socket.send(e.data.replace("PING","PONG")),console.log("replied with: "+e.data.replace("PING","PONG")))};var u=function(t,e){this.userName=t,this.pass=e,this.active=!0,this.socket=null,this.connected=!1,this.gemStats=null,this.class=null,this.specs=null,this.tempMemory=null,this.updatedStats=function(){},this.render=function(){console.log("render user")},this.socketOpen=function(){const t=setInterval(function(){this.socket.readyState&&(clearInterval(t),this.connectToChannel(),this.connected=!0,c("!gems",this),c("!specs",this))}.bind(this),1e3)},this.socketError=function(t){console.log(t)},this.socketClose=function(t){this.connected=!1,console.log("disconnected from server",t)},this.connectToChannel=function(){this.socket.send("CAP REQ :twitch.tv/tags twitch.tv/commands twitch.tv/membership"),this.socket.send("PASS "+this.pass),this.socket.send("NICK "+this.userName),this.socket.send("JOIN #"+window.controller.channel),console.log("Connected to channel: "+window.controller.channel)},this.openSocket=function(){this.socket=new WebSocket("wss://irc-ws.chat.twitch.tv:443/","irc"),this.socket.addEventListener("open",this.socketOpen.bind(this)),this.socket.addEventListener("message",function(t){m(this,t)}.bind(this)),this.socket.addEventListener("close",this.socketClose.bind(this)),this.socket.addEventListener("error",this.socketError.bind(this))}};var p=function(t){window.controller.user;window.controller.user=new u(t.user,t.pass),window.controller.user.render(),window.controller.user.connected||window.controller.user.openSocket()};var w=function(){const t=document.createElement("div");t.classList.add("video-wrapper"),t.innerHTML='\n    <img src="https://via.placeholder.com/2880x1620/000000" alt="" class="video-wrapper__img" />\n  ',window.controller.video.appendChild(t);const e=document.createElement("div");e.classList.add("video-container"),t.appendChild(e),window.controller.videoWrapper=t,window.controller.videoContainer=e};var h=function(){const t=document.createElement("div");t.classList.add("power-buttons"),t.innerHTML='\n    <button class="power-buttons__item" data-button="command" data-command="!p">Power Up</button>\n    <button class="power-buttons__item" data-button="command" data-command="!pd">Power Down</button>\n  ',window.controller.videoContainer.appendChild(t),function(){const t=document.querySelectorAll('.power-buttons [data-button="command"]');for(let e=0;e<t.length;e++)t[e].addEventListener("click",function(){const t=this.getAttribute("data-command");a(t)})}()};var b=function(){return!1};const f=function(t){"highpriest"===t.replace("!","")?window.controller.towerSpellsActive?r():l():!b()&&window.controller.towerSpellsActive&&i()};var _=function(){const t=document.createElement("div");t.classList.add("class-buttons"),t.innerHTML='\n    <div class="class-buttons__container">\n      <div class="class-buttons__item">\n        <button class="class-buttons__item__button" data-button="pickClass" data-command="!archer">Archer</button>\n        <div class="spec">\n          <button class="spec__item" data-button="changeSpec" data-command="!specbowman">Bowman</button>\n          <button class="spec__item" data-button="changeSpec" data-command="!specsniper">Sniper</button>\n          <button class="spec__item" data-button="changeSpec" data-command="!specgunner">Gunner</button>\n        </div>\n      </div>\n      <div class="class-buttons__item">\n        <button class="class-buttons__item__button" data-button="pickClass" data-command="!rogue">Rogue</button>\n        <div class="spec">\n          <button class="spec__item" data-button="changeSpec" data-command="!specknifethrower">Knife Thrower</button>\n          <button class="spec__item" data-button="changeSpec" data-command="!specassassin">Assassin</button>\n          <button class="spec__item" data-button="changeSpec" data-command="!specninja">Ninja</button>\n        </div>\n      </div>\n      <div class="class-buttons__item">\n        <button class="class-buttons__item__button" data-button="pickClass" data-command="!firemage">Firemage</button>\n        <div class="spec">\n          <button class="spec__item" data-button="changeSpec" data-command="!specpyromancer">Pyromancer</button>\n          <button class="spec__item" data-button="changeSpec" data-command="!specbombermage">Bomber Mage</button>\n          <button class="spec__item" data-button="changeSpec" data-command="!specsaboteur">Saboteur</button>\n        </div>\n      </div>\n      <div class="class-buttons__item">\n        <button class="class-buttons__item__button" data-button="pickClass" data-command="!frostmage">Frostmage</button>\n        <div class="spec">\n          <button class="spec__item" data-button="changeSpec" data-command="!specicemage">Icemage</button>\n          <button class="spec__item" data-button="changeSpec" data-command="!spectrickster">Trickster</button>\n          <button class="spec__item" data-button="changeSpec" data-command="!speclightningmage">Lightning Mage</button>\n          <button class="spec__item" data-button="changeSpec" data-command="!specshockmage">Shock Mage</button>\n        </div>\n      </div>\n      <div class="class-buttons__item">\n        <button class="class-buttons__item__button" data-button="pickClass" data-command="!alchemist">Alchemist</button>\n        <div class="spec">\n          <button class="spec__item" data-button="changeSpec" data-command="!specplaguedoctor">Plague Doctor</button>\n          <button class="spec__item" data-button="changeSpec" data-command="!specundeadarcher">Undead Archer</button>\n          <button class="spec__item" data-button="changeSpec" data-command="!specdeathdealer">Deathdealer</button>\n          <button class="spec__item" data-button="changeSpec" data-command="!specpotionmaster">Potion Master</button>\n        </div>\n      </div>\n      <div class="class-buttons__item">\n        <button class="class-buttons__item__button" data-button="pickClass" data-command="!bard">Bard</button>\n        <div class="spec">\n          <button class="spec__item" data-button="changeSpec" data-command="!specminstrel">Minstrel</button>\n          <button class="spec__item" data-button="changeSpec" data-command="!speccommander">Commander</button>\n          <button class="spec__item" data-button="changeSpec" data-command="!specscout">Scout</button>\n        </div>\n      </div>\n      <div class="class-buttons__item">\n        <button class="class-buttons__item__button" data-button="pickClass" data-command="!trapper">Trapper</button>\n      </div>\n      <div class="class-buttons__item">\n        <button class="class-buttons__item__button" data-button="pickClass" data-command="!highpriest">Highpriest</button>\n      </div>\n    </div>\n  ',window.controller.videoContainer.appendChild(t),function(){const t=document.querySelectorAll('.class-buttons [data-button="pickClass"]');for(let e=0;e<t.length;e++)t[e].addEventListener("click",function(){const t=this.getAttribute("data-command");a(t,function(){window.controller.user.class=t.replace("!",""),window.controller.user.updatedStats()}),f(t)})}(),function(){const t=document.querySelectorAll('.class-buttons [data-button="changeSpec"]');for(let e=0;e<t.length;e++)t[e].addEventListener("click",function(){const o=this.getAttribute("data-command");a(o,function(){const n=o.replace("!spec","");window.controller.user.tempMemory={class:t[e].parentElement.parentElement.querySelector('[data-button="pickClass"]').getAttribute("data-command").replace("!",""),spec:n}})})}()};let v;const g=function(){clearTimeout(v),v=setTimeout(function(){const t=window.controller.videoWrapper.querySelector(".video-wrapper__img");window.controller.videoContainer.style.width=`${t.clientWidth}px`,window.controller.videoContainer.style.height=`${t.clientHeight+1}px`},200)};let y=[],S=[];const L=function(){const t=document.querySelectorAll(".tower");y=[],S=[];for(let e=0;e<t.length;e++)t[e].remove()},k=function(t){Object.keys(t).map(e=>{y.push(new function(){this.element=null,this.init=function(t,e,o="7.9%",n="23.8434164%",a){this.element=document.createElement("div"),this.element.classList.add("tower"),this.element.style.width=o,this.element.style.height=n,this.element.style.top=t,this.element.style.left=e,this.element.setAttribute("data-command",a),S.push(this.element)}}),y[0].init(t[e].top,t[e].left,t[e].width,t[e].height,t[e].command)});for(let t=0;t<S.length;t++)window.controller.videoContainer.appendChild(S[t]);!function(){const t=document.querySelectorAll(".tower"),e=function(){const t=this.getAttribute("data-command");a(t)};for(let o=0;o<t.length;o++)t[o].addEventListener("click",e)}()};var C={map1:{tower1:{top:"32.9181495%",left:"23%",command:"!1"},tower2:{top:"57.6512456%",left:"23%",command:"!2"},tower3:{top:"25.088968%",left:"34.4%",command:"!3"},tower4:{top:"48.7544484%",left:"34.4%",command:"!4"},tower5:{top:"17.9715302%",left:"45.6%",command:"!5"},tower6:{top:"48.7544484%",left:"45.6%",command:"!6"},tower7:{top:"17.9715302%",left:"56.9%",command:"!7"},tower8:{top:"43.0604982%",left:"56.9%",command:"!8"},tower9:{top:"32.9181495%",left:"68.4%",command:"!9"},tower10:{top:"63.1672598%",left:"68.4%",command:"!10"},tower11:{top:"39.5017794%",left:"79.4%",command:"!11"},tower12:{top:"63.1672598%",left:"79.4%",command:"!12"},train:{top:"13.3451957%",left:"83.3%",width:"16.8%",height:"26.3345196%",command:"!train"}},map2:{tower1:{top:"35.5239787%",left:"80.4%",command:"!1"},tower2:{top:"25.9325044%",left:"69.4%",command:"!2"},tower3:{top:"22.0248668%",left:"58%",command:"!3"},tower4:{top:"27.1758437%",left:"47.1%",command:"!4"},tower5:{top:"23.8010657%",left:"35.4%",command:"!5"},tower6:{top:"27.1758437%",left:"23.8%",command:"!6"},tower7:{top:"53.4635879%",left:"27.5%",command:"!7"},tower8:{top:"64.2984014%",left:"35.4%",command:"!8"},tower9:{top:"64.2984014%",left:"46.5%",command:"!9"},tower10:{top:"60.3907638%",left:"58%",command:"!10"},tower11:{top:"64.2984014%",left:"69.4%",command:"!11"},tower12:{top:"64.2984014%",left:"80.4%",command:"!12"},train:{top:"13.1438721%",left:"83.3%",width:"16.8%",height:"26.3345196%",command:"!train"},altar:{width:"10.6%",height:"20.6039076%",top:"13.1438721%",left:"7.5%",command:"!altar"}},map3:{tower1:{top:"43.1616341%",left:"14.8%",command:"!1"},tower2:{top:"14.7424512%",left:"26.8%",command:"!2"},tower3:{top:"43.1616341%",left:"26.8%",command:"!3"},tower4:{top:"67.1403197%",left:"26.8%",command:"!4"},tower5:{top:"71.7584369%",left:"39.2%",command:"!5"},tower6:{top:"43.1616341%",left:"39.2%",command:"!6"},tower7:{top:"19.5381883%",left:"39.2%",command:"!7"},tower8:{top:"67.1403197%",left:"51.6%",command:"!8"},tower9:{top:"43.1616341%",left:"51.6%",command:"!9"},tower10:{top:"14.7424512%",left:"51.6%",command:"!10"},tower11:{top:"19.5381883%",left:"63.9%",command:"!11"},tower12:{top:"52.7531083%",left:"63.9%",command:"!12"},train:{top:"13.4991119%",left:"84.4%",width:"15.6%",height:"24.5115453%",command:"!train"}},map4:{tower1:{top:"27.7087034%",left:"16.7%",command:"!1"},tower2:{top:"27.7087034%",left:"25.2%",command:"!2"},tower3:{top:"27.7087034%",left:"36.3%",command:"!3"},tower4:{top:"27.7087034%",left:"44.8%",command:"!4"},tower5:{top:"27.7087034%",left:"56%",command:"!5"},tower6:{top:"27.7087034%",left:"64.5%",command:"!6"},tower7:{top:"62.5222025%",left:"25.2%",command:"!7"},tower8:{top:"62.5222025%",left:"36.3%",command:"!8"},tower9:{top:"62.5222025%",left:"44.8%",command:"!9"},tower10:{top:"62.5222025%",left:"56%",command:"!10"},tower11:{top:"62.5222025%",left:"64.5%",command:"!11"},tower12:{top:"62.5222025%",left:"78.3%",command:"!12"},train:{top:"13.1438721%",left:"83.3%",width:"16.8%",height:"26.2877442%",command:"!train"},altar:{width:"11.1%",height:"27.3534636%",top:"58.7921847%",left:"14%",command:"!altar"}},map5:{tower1:{top:"41.3854352%",left:"13.9%",command:"!1"},tower2:{top:"41.3854352%",left:"22.5%",command:"!2"},tower3:{top:"25.7548845%",left:"44.9%",command:"!3"},tower4:{top:"61.1012433%",left:"44.9%",command:"!4"},tower5:{top:"14.2095915%",left:"55.9%",command:"!5"},tower6:{top:"42.4511545%",left:"55.9%",command:"!6"},tower7:{top:"64.1207815%",left:"55.9%",command:"!7"},tower8:{top:"20.9591474%",left:"66.9%",command:"!8"},tower9:{top:"43.5168739%",left:"66.9%",command:"!9"},tower10:{top:"70.6927176%",left:"66.9%",command:"!10"},tower11:{top:"35.5239787%",left:"78.3%",command:"!11"},tower12:{top:"64.1207815%",left:"78.3%",command:"!12"},train:{top:"13.1438721%",left:"83.3%",width:"16.8%",height:"26.2877442%",command:"!train"}},map6:{tower1:{top:"63.0550622%",left:"18.5%",command:"!1"},tower2:{top:"33.2149201%",left:"35.4%",command:"!2"},tower3:{top:"33.2149201%",left:"46.8%",command:"!3"},tower4:{top:"33.2149201%",left:"57.9%",command:"!4"},tower5:{top:"33.2149201%",left:"69.1%",command:"!5"},tower6:{top:"38.0106572%",left:"80.5%",command:"!6"},tower7:{top:"63.0550622%",left:"29.7%",command:"!7"},tower8:{top:"63.0550622%",left:"38.7%",command:"!8"},tower9:{top:"68.2060391%",left:"49.4%",command:"!9"},tower10:{top:"68.2060391%",left:"57.9%",command:"!10"},tower11:{top:"63.0550622%",left:"69.1%",command:"!11"},tower12:{top:"63.0550622%",left:"80.5%",command:"!12"},train:{top:"13.4991119%",left:"84.4%",width:"15.6%",height:"24.5115453%",command:"!train"},altar:{width:"7.9%",height:"23.8010657%",top:"25.7548845%",left:"11.6%",command:"!altar"}},map7:{tower1:{top:"21.8472469%",left:"25.6%",command:"!1"},tower2:{top:"72.2912966%",left:"81%",command:"!2"},tower3:{top:"49.5559503%",left:"26.2%",command:"!3"},tower4:{top:"64.2984014%",left:"71.1%",command:"!4"},tower5:{top:"64.2984014%",left:"15%",command:"!5"},tower6:{top:"40.6749556%",left:"71.1%",command:"!6"},tower7:{top:"64.2984014%",left:"37.9%",command:"!7"},tower8:{top:"57.3712256%",left:"54.4%",command:"!8"},tower9:{top:"40.6749556%",left:"37.9%",command:"!9"},tower10:{top:"28.4191829%",left:"54.4%",command:"!10"},tower11:{top:"16.3410302%",left:"37.9%",command:"!11"},tower12:{top:"13.321492%",left:"67.2%",command:"!12"},train:{top:"13.321492%",left:"83.3%",width:"16.8%",height:"26.2877442%",command:"!train"},altar:{width:"14.8%",height:"26.2877442%",top:"16.3410302%",left:"9.3%",command:"!altar"}},map8:{tower1:{top:"30.017762%",left:"15.2%",command:"!1"},tower2:{top:"24.3339254%",left:"26.4%",command:"!2"},tower3:{top:"20.2486679%",left:"36.7%",command:"!3"},tower4:{top:"66.60746%",left:"16.6%",command:"!4"},tower5:{top:"66.60746%",left:"28.9%",command:"!5"},tower6:{top:"57.3712256%",left:"36.7%",command:"!6"},tower7:{top:"71.5808171%",left:"62.4%",command:"!7"},tower8:{top:"65.7193606%",left:"74.3%",command:"!8"},tower9:{top:"57.3712256%",left:"82.4%",command:"!9"},tower10:{top:"20.2486679%",left:"55.3%",command:"!10"},tower11:{top:"20.2486679%",left:"65.9%",command:"!11"},tower12:{top:"36.7673179%",left:"72.8%",command:"!12"},train:{top:"13.1438721%",left:"83.3%",width:"16.8%",height:"26.4653641%",command:"!train"}},map9:{tower1:{top:"31.0834813%",left:"17.6%",command:"!1"},tower2:{top:"25.9325044%",left:"26.7%",command:"!2"},tower3:{top:"20.7815275%",left:"35.6%",command:"!3"},tower4:{top:"20.7815275%",left:"46.6%",command:"!4"},tower5:{top:"23.9786856%",left:"57.9%",command:"!5"},tower6:{top:"40.8525755%",left:"68.8%",command:"!6"},tower7:{top:"33.7477798%",left:"81.2%",command:"!7"},tower8:{top:"64.4760213%",left:"80.3%",command:"!8"},tower9:{top:"64.4760213%",left:"66%",command:"!9"},tower10:{top:"68.5612789%",left:"54.7%",command:"!10"},tower11:{top:"58.7921847%",left:"41.1%",command:"!11"},tower12:{top:"58.7921847%",left:"28%",command:"!12"},train:{top:"13.1438721%",left:"85.2%",width:"14.8%",height:"23.268206%",command:"!train"},altar:{width:"10.8%",height:"19.1829485%",top:"63.2326821%",left:"13.4%",command:"!altar"}}};const A=function(){const t=document.querySelector('[data-button="overlay-clear"]'),e=document.querySelectorAll('[data-button="overlay-change"]'),o=document.querySelector('[data-input="hide-dashes"]'),n=function(){window.controller.activeMap&&window.controller.activeMap.classList.remove("selector__popout__item--active"),this.classList.add("selector__popout__item--active"),window.controller.activeMap=this,L(),k(C[this.getAttribute("data-overlay")]),b()&&(window.controller.towerSpellsActive?r():l())};t.addEventListener("click",function(){window.controller.activeMap&&window.controller.activeMap.classList.remove("selector__popout__item--active"),window.controller.activeMap=null,L(),window.controller.towerSpellsActive&&i()}),o.addEventListener("click",function(){this.checked?window.controller.videoContainer.classList.add("video-container--hide-dashes"):window.controller.videoContainer.classList.remove("video-container--hide-dashes")});for(let t=0;t<e.length;t++)e[t].addEventListener("click",n)},M=function(t){this.element=null,this.action=null,this.init=function(){const e=document.createElement("div");e.classList.add("custom-actions__list__item"),e.innerHTML=`\n      <button class="custom-actions__list__item__trigger" data-command="${t}">${t}</button>\n      <button class="custom-actions__list__item__remove">\n        <svg style="width:12px;height:12px" viewBox="0 0 24 24">\n          <path fill="#e9ede2" d="M13.46,12L19,17.54V19H17.54L12,13.46L6.46,19H5V17.54L10.54,12L5,6.46V5H6.46L12,10.54L17.54,5H19V6.46L13.46,12Z" />\n        </svg>\n      </button>\n    `,this.element=e,this.action=t,this.initEventListeners()},this.removeItem=function(t){t.preventDefault();const e=encodeURIComponent(this.action);E.splice(E.indexOf(e),1),Object(n.d)("customActions",E,function(){this.element.remove(),delete q[e]}.bind(this))}.bind(this),this.initEventListeners=function(){const t=this.element.querySelector(".custom-actions__list__item__remove"),e=this.element.querySelector(".custom-actions__list__item__trigger");t.addEventListener("click",this.removeItem),e.addEventListener("click",function(){a(this.action)}.bind(this))}};let E=[],q={},T=null;const H=function(t){const e=document.querySelector(".custom-actions__popout");t?(E.push(t),Object(n.d)("customActions",E,function(){const e=encodeURIComponent(t);q[e]=new M(t),q[e].init(),T.appendChild(q[e].element)})):Object(n.a)("customActions",function(t){E=t;for(let t=0;t<E.length;t++){const e=encodeURIComponent(E[t]);q[e]=new M(E[t]),q[e].init(),T.appendChild(q[e].element)}}),e.prepend(T)},P=function(){E=[],q={},(T=document.createElement("div")).classList.add("custom-actions__list");const t=document.createElement("div");t.classList.add("custom-actions"),t.innerHTML='\n    <svg style="width:24px;height:24px" viewBox="0 0 24 24">\n      <path fill="#e9ede1" d="M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z" />\n    </svg>\n\n    <div class="custom-actions__popout">\n      <form class="custom-actions__form">\n        <input type="text" class="custom-actions__form__input" placeholder="!t !a !p" />\n        <button class="custom-actions__form__button">Add</button>\n      </form>\n    </div>\n  ',window.controller.videoContainer.appendChild(t),H(),function(){const t=document.querySelector(".custom-actions__form__button"),e=document.querySelector(".custom-actions__form__input");t.addEventListener("click",function(t){t.preventDefault(),e.value&&(H(e.value),e.value="")})}()},O=function(){const t=document.createElement("div");t.classList.add("leave"),t.innerHTML='\n  <button class="leave__button" data-button="leave" data-command="!leave">Leave</button>\n  ',window.controller.videoContainer.appendChild(t),document.querySelector('[data-button="leave"]').addEventListener("click",function(){a(this.getAttribute("data-command"),function(){window.controller.user.class=null}),b()||i()})},x=function(){const t=document.createElement("div");t.classList.add("ttdbot"),t.innerHTML='\n    <div class="ttdbot__dropdown">\n      <button class="ttdbot__dropdown__button" data-button="whisper" data-command="!diff">Difficulty</button>\n      <button class="ttdbot__dropdown__button" data-button="whisper" data-command="!essence">Essence</button>\n      <button class="ttdbot__dropdown__button" data-button="whisper" data-command="!gems">Gems</button>\n      <button class="ttdbot__dropdown__button" data-button="chat" data-command="!gold">Gold</button>\n      <button class="ttdbot__dropdown__button" data-button="whisper" data-command="!highscores">Highscores</button>\n      <button class="ttdbot__dropdown__button" data-button="whisper" data-command="!specs">Specs</button>\n      <button class="ttdbot__dropdown__button" data-button="whisper" data-command="!spells">Spells</button>\n      <button class="ttdbot__dropdown__button" data-button="whisper" data-command="!stats">Stats</button>\n    </div>\n  ',window.controller.videoContainer.appendChild(t),function(t){const e=t.querySelectorAll('[data-button="whisper"]'),o=t.querySelectorAll('[data-button="chat"]');for(let t=0;t<e.length;t++)e[t].addEventListener("click",function(){const t=this.getAttribute("data-command");c(t)});for(let t=0;t<o.length;t++)o[t].addEventListener("click",function(){const t=this.getAttribute("data-command");a(t)})}(t)};window.controller={video:null,videoWrapper:null,videoContainer:null,channel:"dongerlistdotcom",user:null,overlayActive:!1,activeMap:null,towerSpellsActive:!1};const I=function(){if(window.controller.overlayActive)Object(n.a)("user",p);else{const t=setInterval(function(){window.controller.video=document.querySelector(".video-player__container"),document.body.classList.add("overlay-active"),window.controller.video&&(w(),function(){const t=document.querySelector(".side-nav__toggle-visibility"),e=document.querySelector(".right-column__toggle-visibility"),o=document.querySelector(".player-buttons-right");t&&t.addEventListener("click",g),e&&e.addEventListener("click",g),o&&o.addEventListener("click",g),window.addEventListener("resize",g)}(),g(),function(){const t=document.createElement("div");t.classList.add("selector"),t.innerHTML='\n    <div class="selector__popout">\n      <label for="hide-dashes" class="selector__popout__option"><input type="checkbox" id="hide-dashes" data-input="hide-dashes" />Hide dashed outlines</label>\n      <button class="selector__popout__item" data-button="overlay-clear">Clear overlays</button>\n      <button class="selector__popout__item" data-button="overlay-change" data-overlay="map1">Map 1 - Green Pasture</button>\n      <button class="selector__popout__item" data-button="overlay-change" data-overlay="map2">Map 2 - Lost Desert</button>\n      <button class="selector__popout__item" data-button="overlay-change" data-overlay="map3">Map 3 - Snow Trap</button>\n      <button class="selector__popout__item" data-button="overlay-change" data-overlay="map4">Map 4 - Lava or Leave It</button>\n      <button class="selector__popout__item" data-button="overlay-change" data-overlay="map5">Map 5 - Wandering Fields</button>\n      <button class="selector__popout__item" data-button="overlay-change" data-overlay="map6">Map 6 - Dune Gauntlet</button>\n      <button class="selector__popout__item" data-button="overlay-change" data-overlay="map7">Map 7 - Double Trouble</button>\n      <button class="selector__popout__item" data-button="overlay-change" data-overlay="map8">Map 8 - Arid Junction</button>\n      <button class="selector__popout__item" data-button="overlay-change" data-overlay="map9">Map 9 - Frozen Steppes</button>\n    </div>\n  ',window.controller.videoContainer.appendChild(t),A()}(),h(),_(),P(),O(),x(),Object(n.a)("user",p),clearInterval(t))},1e3);window.controller.overlayActive=!0}};chrome.runtime.onMessage.addListener(function(t,e,o){"connect"===t.action&&(I(),console.log("connect")),"disconnect"===t.action&&(console.log("disconnect"),document.body.classList.remove("overlay-active"),window.controller.videoWrapper.remove(),window.controller={video:null,videoWrapper:null,videoContainer:null,channel:"archonthewizard",user:null,overlayActive:!1}),"checkStatus"===t.action&&o({status:window.controller.overlayActive})})}]);